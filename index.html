<!DOCTYPE html>
<html>
    <head>
        <title>Blazing Baton</title>
        <meta charset="utf-8">
        <meta name="description" content="Infoscreen for live music performing with MIDI equipment" />
        <meta property="og:type" content="website">
        <meta property="og:title" content="Blazing Baton">
        <meta property="og:description" content="Infoscreen for live music performing with MIDI equipment" />
        <meta name="keywords" content="midi clock monitoring, midi clock overview, midi clock visualization, display midi clock, midi clock loop, break point support, music live performing, 4/4 beat, midi equipment" />

        <link rel="shortcut icon" href="./img/dinplug.jpg">
        <link rel="stylesheet" type="text/css" media="all" href="./css/styles.css">
    </head>
    <body>
        <div class="progBar hidden" id="progBar64">
            <div class="innerProgBar" id="innerProgBar64"></div>
            <div class="progBarGrid"></div>
            <div id="clockHint"><span>Waiting for clock input...</span></div>
        </div>
        <div class="progBar hidden" id="progBar16">
            <div class="innerProgBar" id="innerProgBar16"></div>
            <div class="progBarGrid"></div>
        </div>
        <div class="progBar progBarDarker hidden" id="progBar4">
            <div class="innerProgBar" id="innerProgBar4"></div>
            <div class="progBarGrid"></div>
        </div>
        <div id="pulsator"></div>
        <div class="bottom-grid">
            <div class="col-piano">
                <ul class="simplepiano common hidden" id="piano">
                    <li class="white C" data-keyname="C"></li>
                    <li class="black CS" data-keyname="CS"></li>
                    <li class="white D" data-keyname="D"></li>
                    <li class="black DS" data-keyname="DS"></li>
                    <li class="white E" data-keyname="E"></li>
                    <li class="white F" data-keyname="F"></li>
                    <li class="black FS" data-keyname="FS"></li>
                    <li class="white G" data-keyname="G"></li>
                    <li class="black GS" data-keyname="GS"></li>
                    <li class="white A" data-keyname="A"></li>
                    <li class="black AS" data-keyname="AS"></li>
                    <li class="white B" data-keyname="B"></li>
                </ul>
                <div id="hotspots-container">

                </div>
            </div>
            <div class="col-numbers">
                <div id="numerator">
                    <span id="num1">1</span>-<span id="num2">1</span>-<span id="num3">1</span>
                </div>
                <div id="time" class="hidden">
                    <div>00:00</div>
                </div>
                <div id="bpm" class="hidden">
                    <span id="bpm-value">0</span> <span id="bpm-label">BPM</span>
                </div>
            </div>
        </div>
        <p id="fake-events">
            <button id="fake-start">start</button>
            <button class="fake-noteon" data-note="C" data-inputid="input-3" data-channel="1">I1 C on</button>
            <button class="fake-noteon" data-note="CS" data-inputid="input-3" data-channel="1">I1 C# on</button>
            <button class="fake-noteon" data-note="D" data-inputid="input-3" data-channel="5">I5 D on</button>
            <button class="fake-noteon" data-note="DS" data-inputid="input-3" data-channel="5">I5 D# on</button>
            <button class="fake-noteon" data-note="E" data-inputid="input-3" data-channel="1">I1 E on</button>
            <button class="fake-noteon" data-note="F" data-inputid="input-3" data-channel="7">I7 F on</button>
            <button class="fake-noteon" data-note="FS" data-inputid="input-3" data-channel="7">I7 F# on</button>
            <button class="fake-noteon" data-note="G" data-inputid="input-3" data-channel="8">I8 G on</button>
            <button class="fake-noteon" data-note="GS" data-inputid="input-3" data-channel="8">I8 G# on</button>
            <button class="fake-noteon" data-note="A" data-inputid="input-3" data-channel="14">I14 A on</button>
            <button class="fake-noteon" data-note="AS" data-inputid="1A0CE1F47C19C43DAEB93B9595F6E4BA822ED318FE8D8BF2750B66286B5BEC38" data-channel="5">I14 A# on</button>
            <button class="fake-noteon" data-note="B" data-inputid="1A0CE1F47C19C43DAEB93B9595F6E4BA822ED318FE8D8BF2750B66286B5BEC38" data-channel="1">I1 H on</button>
            <br>
            <button id="fake-stop">stop</button>
            <button class="fake-noteoff" data-note="C" data-inputid="input-3" data-channel="1">I1 C off</button>
            <button class="fake-noteoff" data-note="CS" data-inputid="input-3" data-channel="1">I1 C# off</button>
            <button class="fake-noteoff" data-note="D" data-inputid="input-3" data-channel="5">I5 D off</button>
            <button class="fake-noteoff" data-note="DS" data-inputid="input-3" data-channel="5">I5 D# off</button>
            <button class="fake-noteoff" data-note="E" data-inputid="input-3" data-channel="1">I1 E off</button>
            <button class="fake-noteoff" data-note="F" data-inputid="input-3" data-channel="7">I7 F off</button>
            <button class="fake-noteoff" data-note="FS" data-inputid="input-3" data-channel="7">I7 F# off</button>
            <button class="fake-noteoff" data-note="G" data-inputid="input-3" data-channel="8">I8 G off</button>
            <button class="fake-noteoff" data-note="GS" data-inputid="input-3" data-channel="8">I8 G# off</button>
            <button class="fake-noteoff" data-note="A" data-inputid="input-3" data-channel="14">I14 A off</button>
            <button class="fake-noteoff" data-note="AS" data-inputid="1A0CE1F47C19C43DAEB93B9595F6E4BA822ED318FE8D8BF2750B66286B5BEC38" data-channel="5">I14 A# off</button>
            <button class="fake-noteoff" data-note="B" data-inputid="1A0CE1F47C19C43DAEB93B9595F6E4BA822ED318FE8D8BF2750B66286B5BEC38" data-channel="1">I1 H off</button>
        </p>
        <button id="toggle-settings" title="show/hide settings">
            toggle settings
        </button>
        <div id="settings" class="hidden">
            <h3>Settings are not functional yet</h3>
            <p>As long as the target group for <strong>Blazing Baton</strong> is zero, this feature won't get implemented.<br>
                Feel free to <a href="https://github.com/othmar52/blazing-baton/issues" target="_blank">create an issue</a> for this feature request.</p>
            <div id="settings-columns">
                <fieldset id="settings-show">
                    <legend for="settings-show">Show</legend>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-progress16" value="1" checked="checked" />
                            <label for="settings-show-progress16" class="label-handle"></label>
                        </div>
                        <label for="settings-show-progress16" class="label-text">
                            Progressbar 16
                        </label>
                    </div>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-progress4" value="1" checked="checked" />
                            <label for="settings-show-progress4" class="label-handle"></label>
                        </div>
                        <label for="settings-show-progress4" class="label-text">
                            Progressbar 4
                        </label>
                    </div>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-countdown" value="1" checked="checked" />
                            <label for="settings-show-countdown" class="label-handle"></label>
                        </div>
                        <label for="settings-show-countdown" class="label-text">
                            Countdown
                        </label>
                    </div>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-piano" value="1" checked="checked" />
                            <label for="settings-show-piano" class="label-handle"></label>
                        </div>
                        <label for="settings-show-piano" class="label-text">
                            Piano
                        </label>
                    </div>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-time" value="1" checked="checked" />
                            <label for="settings-show-time" class="label-handle"></label>
                        </div>
                        <label for="settings-show-time" class="label-text">
                            Time
                        </label>
                    </div>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-tempo" value="1" checked="checked" />
                            <label for="settings-show-tempo" class="label-handle"></label>
                        </div>
                        <label for="settings-show-tempo" class="label-text">
                            Tempo
                        </label>
                    </div>
                </fieldset>
                <fieldset id="hotspot-settings">
                    <legend for="hotspot-settings">Hot spots</legend>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-hotspots" value="1" checked="checked" />
                            <label for="settings-show-hotspots" class="label-handle"></label>
                        </div>
                        <label for="settings-show-hotspots" class="label-text">
                            Show hotspots
                        </label>
                    </div>
                    <div class="checkbox-wrap">
                        <div class="checkbox">
                            <input type="checkbox" id="settings-show-hotspotsum" value="1" checked="checked" />
                            <label for="settings-show-hotspotsum" class="label-handle"></label>
                        </div>
                        <label for="settings-show-hotspotsum" class="label-text">
                            Show sum <span class="tooltip" title="Show additional note hotspot row with the sum of all inputs and channels">?</span>
                        </label>
                    </div>
                    <label for="settings-hotspot-resolution">
                        <select id="settings-hotspot-resolution">
                            <option value="24">&frac18; bar</option>
                            <option value="24">&frac14; bar</option>
                            <option value="48">&frac12; bar</option>
                            <option value="48">1 bar</option>
                        </select>
                        Resolution [clock ticks/bar length]
                    </label>
                    <br>
                    <label for="settings-hotspot-observationPeriod">
                        <select id="settings-hotspot-observationPeriod">
                            <option value="1">1 bar</option>
                            <option value="2">2 bars</option>
                            <option value="4">4 bars</option>
                            <option value="8">8 bars</option>
                            <option value="16">16 bars</option>
                        </select>
                        Observation Period [bars]
                    </label>
                    <br>
                    <label for="settings-hotspot-lifetime">
                        <input id="settings-hotspot-lifetime" value="40" type="text" size="3" type="text" />
                        Lifetime [seconds]
                    </label>
                </fieldset>
            </div>
            <fieldset id="hotspot-settings">
                <legend for="input-settings">MIDI input configuration</legend>
                <p>Configure which of the recognised inputs/channels provide clock and note events</p>
                <ul id="input-config">

                </ul>
                <button id="addNoteInput">Add Note Input</button>
            </fieldset>
        </div>
        <div id="big-overlay"></div>
        <!-- MIT. Copyright (c) Rich Tibbett         https://github.com/richtr/NoSleep.js -->
        <!-- MIT. Copyright (c) Jean-Philippe Côté   https://github.com/cotejp/webmidi -->
        <script type="text/javascript" src="./vendor/richtr/NoSleep.js/noSleep.js"></script>
        <script type="text/javascript" src="./vendor/cotejp/webmidi/webmidi.min.js"></script>
        <!-- TODO: implement some build tool for merging and minifying -->
        <script type="text/javascript" src="./js/blazing.baton.js"></script>
        <script type="text/javascript" src="./js/src/blazingConfig.js"></script>
        <script type="text/javascript" src="./js/src/helper.js"></script>
        <script type="text/javascript" src="./js/src/fakeEvents.js"></script>
        <script type="text/javascript" src="./js/src/midiEvents.js"></script>
        <script type="text/javascript" src="./js/src/multiStop.js"></script>
        <script type="text/javascript" src="./js/src/hotSpots.js"></script>
        <script type="text/javascript" src="./js/src/overlayCountdown.js"></script>
        <script type="text/javascript" src="./js/src/numerator.js"></script>
        <script type="text/javascript" src="./js/src/settings.js"></script>
        <script type="text/javascript" src="./js/src/time.js"></script>
        <script type="text/javascript" src="./js/src/idle.js"></script>
        <script type="text/javascript" src="./js/src/bpm.js"></script>
        <script type="text/javascript" src="./js/src/notify.js"></script>
        <script type="text/javascript" src="./js/src/cookie.js"></script>
        <script type="text/javascript">
            // for option documentation see: https://github.com/othmar52/blazing-baton/

            var demoConfig = new BlazingConfig();
            demoConfig.addInput(
                new ClockInput({
                    name: "Express  128: Port 8",
                    id: "input-7"
                })
            ).addInput(
                new ChannelNotesInput({
                    genericLabel: "Wastl #%CHAN%",
                    color: "green",
                    name: "Express  128: Port 1",
                    //name: "Control Hub MIDI",
                    id: "input-0",
                    ignoreChannels: [10],
                    channelOverrides: [
                        { channel: 1, color: "orange", label: "JD-Xi D1" },
                        { channel: 2, color: "orange", label: "JD-Xi D2" },
                        { channel: 3, color: "blue", label: "JD-Xi A" },
                        { channel: 5, color: "green", label: "System 1" },
                        { channel: 6, color: "cyan", label: "Microkorg" },
                        { channel: 7, color: "red", label: "Virus A" },
                        { channel: 8, color: "blue", label: "MFB Synth II" },
                        { channel: 9, color: "blue", label: "KORG Gadget" }
                    ]
                })
            ).addInput(
                new ChannelNotesInput({
                    genericLabel: "Rikki #%CHAN%",
                    color: "yellow",
                    name: "Express  128: Port 2",
                    id: "input-1",
                    ignoreChannels: [10]
                })
            ).addInput(
                new ChannelNotesInput({
                    genericLabel: "Astl #%CHAN%",
                    color: "cyan",
                    name: "Express  128: Port 3",
                    id: "input-2",
                    ignoreChannels: [10],
                    channelOverrides: [
                        { channel: 11, color: "violet", label: "Streichfett" },
                        { channel: 12, color: "green", label: "Rocket" }
                    ]
                })
            ).addInput(
                new ChannelNotesInput({
                    genericLabel: "Kurt #%CHAN%",
                    color: "blue",
                    name: "Express  128: Port 4",
                    id: "input-3",
                    ignoreChannels: [10],
                    channelOverrides: [
                        { channel: 1, color: "red", label: "Mininova" }
                    ]
                })
            ).addInput(
                new ChannelNotesInput({
                    genericLabel: "Gast A #%CHAN%",
                    color: "orange",
                    name: "Express  128: Port 5",
                    id: "input-4",
                    ignoreChannels: [10]
                })
            ).addInput(
                new ChannelNotesInput({
                    genericLabel: "Gast B #%CHAN%",
                    color: "grey",
                    name: "Express  128: Port 6",
                    id: "input-5",
                    ignoreChannels: [10]
                })
            ).addInput(
                new ChannelNotesInput({
                    genericLabel: "Gast C #%CHAN%",
                    color: "grey",
                    name: "Express  128: Port 7",
                    id: "input-6",
                    ignoreChannels: [10]
                })
            );
            var blazingBaton = new BlazingBaton(demoConfig);
        </script>
    </body>
</html>
